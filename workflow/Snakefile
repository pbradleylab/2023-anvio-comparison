from snakemake.utils import min_version
min_version("6.0")

configfile: "config/config.json"
pepfile: config["pepfile"]

include: "rules/sample_selection.smk"
include: "rules/annotation.smk"
#include: "rules/comparison.smk"


def get_genomes(wildcards):
    out = []
    for sample in pep.sample_table.sample_name.tolist():
        out.append(rules.kofamscan.output[0].format(genome=sample))
        out.append(rules.microbeannotator.output[0].format(genome=sample))
        out.append(rules.anvio_export_functions.output[0].format(genome=sample))
    return out

rule all:
    input:get_genomes
